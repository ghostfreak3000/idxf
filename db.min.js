var db=function(n,t){function r(){var n=function(n){var t=window.indexedDB.open(u);t.onsuccess=function(t){var i=t.target.result;typeof n=="function"&&n(i);i.close()};t.onupgradeneeded=function(t){var i=t.target.result;typeof n=="function"&&n(i);i.close()}},t=function(n){var t=window.indexedDB.open(u);t.onsuccess=function(){var r=t.result,f=parseInt(r.version),i;r.close();i=window.indexedDB.open(u,f+1);i.onupgradeneeded=function(){var t=i.result;console.log("calling upgrade function");typeof n=="function"&&n(t);t.close()};i.onsuccess=function(){var n=i.result;n.close()}}};switch(arguments.length){case 0:break;case 1:return n.apply(this,arguments);default:return t.apply(this,arguments)}}function f(n,t){try{if(t.constructor===Array)for(var i=0,u=t.length;i<u;i++)n.objectStoreNames.contains(t[i])||n.createObjectStore(t[i],{autoIncrement:!0});else n.objectStoreNames.contains(t)||n.createObjectStore(t,{autoIncrement:!0})}catch(r){switch(r.code){default:console.log(r)}}}function e(n,t,i){var r=n.transaction([t],"readwrite"),u=r.objectStore(t);u.add(i)}function o(n,t,i){n.transaction([t],"readwrite").objectStore(t).delete(i)}function s(n,t,i,r){var u=n.transaction([t],"readwrite").objectStore(t).get(i);u.onsuccess=function(){u.result;typeof r=="function"&&r(u.result)}}function h(n,t,i){var r=[],u=n.transaction([t]).objectStore(t).openCursor();u.onsuccess=function(n){var t=n.target.result;t?(r.push({key:t.key,value:t.value}),t.continue()):typeof i=="function"&&i(r)}}function c(n,t,i,r){var f=n.transaction([t],"readwrite").objectStore(t),u=f.get(i);u.onerror=function(){return!1};u.onsuccess=function(){var t=u.result,n;t=r;n=f.put(r,i);n.onerror=function(){return!1};n.onsuccess=function(){return!0}}}var u=n,l=t,i={};return i.addStore=function(n){r(function(t){f(t,n)},{update:!0})},i.addData=function(n,t){r(function(i){e(i,n,t)})},i.delDataOnId=function(n,t){r(function(i){o(i,n,t)})},i.getDataOnId=function(n,t,i){r(function(r){s(r,n,t,i)})},i.getData=function(n,t){r(function(i){h(i,n,t)})},i.setDataOnId=function(n,t,i){r(function(r){c(r,n,t,i)})},i}